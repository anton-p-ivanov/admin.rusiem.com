"use strict";(self.webpackChunkadmin_rusiem_com=self.webpackChunkadmin_rusiem_com||[]).push([[7],{2195:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7697);const l={title:{name:"title",label:"Название",hint:"Допускается не более 250 символов."},slug:{type:"slug",name:"slug",label:"Символьный код",hint:"Допускается не более 250 символов из набора [a-z0-9_]. Генерируется автоматически если значение не заполнено."},description:{name:"description",type:"textarea",label:"Аннотация",hint:"Допускается обычный текст и HTML код."},content:{name:"content",type:"textarea",label:"Основной текст",hint:"Допускается обычный текст и HTML код.",attrs:{size:"large"}},sort:{name:"sort",type:"number",label:"Индекс сортировки",hint:"Значение определяющее положение элемента в списке элементов."},publishedAt:{type:"datetime",name:"publishedAt",label:"Дата публикации",hint:"Дата, отображаемая пользователям на сайте."},isPublished:{type:"checkbox",name:"isPublished",label:"Опубликовать элемент?",hint:"Только опубликованные элементы видны пользователям."},sites:{type:"choices",name:"sites",label:"Отображать на сайтах",hint:"Выберите один или несколько сайтов, на которых элемент будет доступен.",attrs:{isMultiple:!0,choicesCallback:function(){return r.Z.lookup("/sites")}}},locale:{type:"choices",name:"locale",label:"Отображать для локали",hint:"Выберите локаль, для которой элемент будет отображаться на сайте.",attrs:{choicesCallback:function(){return r.Z.lookup("/locales")}}},tags:{type:"select",name:"tags",label:"Привязка к тегам",hint:"Выберите один или несколько тегов, которые будут присвоены элементу.",attrs:{isMultiple:!0,size:10,optionsCallback:function(){return r.Z.lookup("/catalog/tags/lookup?context=news")}}}}},1007:(e,t,n)=>{n.d(t,{Z:()=>V});var r=n(7294),l=n(6974),a=n(8594),i=n(3884);const c=r.createContext({fields:{}});var s=n(4942),o=n(885),u=n(4393);const m={keywords:{name:"keywords",label:"Ключевые слова",hint:"Список ключевых слов через разделитель для мета-тега keywords."},description:{name:"description",label:"Описание",type:"textarea",hint:"Описание для мета-тега description."},title:{name:"title",label:"Заголовок окна браузера",hint:"Заголовок для тега title."}};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(){var e=(0,u.o)(),t=e.state,n=e.update,l=(0,r.useState)(Object.fromEntries(t.data.meta.map((function(e){return[e.name,e.content]})))),a=(0,o.Z)(l,2),c=a[0],d=a[1];return Object.keys(m).forEach((function(e){var t=m[e],n=c[t.name],r={value:void 0===n?"":n,onChange:function(e){d(f(f({},c),{},(0,s.Z)({},t.name,e)))}};m[e]=f(f({},t),r)})),(0,r.useEffect)((function(){var e=Object.keys(c).map((function(e){return{property:"name",name:e,content:c[e]}}));n(f(f({},t),{},{data:f(f({},t.data),{},{meta:e})}))}),[c]),r.createElement(r.Fragment,null,r.createElement(i.l0.Field,{field:m.title}),r.createElement(i.l0.Field,{field:m.keywords}),r.createElement(i.l0.Field,{field:m.description}))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=function(){var e=(0,r.useContext)(c).fields;return r.createElement(r.Fragment,null,r.createElement("div",{className:"grid-view__columns"},r.createElement(i.l0.Field,{field:e.publishedAt})),r.createElement(i.l0.Field,{field:e.title}),r.createElement(i.l0.Field,{field:v(v({},e.slug),{},{attrs:{value:e.title.value}})}),r.createElement(i.l0.Field,{field:e.description}),r.createElement(i.l0.Field,{field:e.content}),r.createElement("div",{className:"grid-view__columns"},r.createElement(i.l0.Field,{field:e.imageSmall}),r.createElement(i.l0.Field,{field:e.imageLarge})),r.createElement("div",{className:"grid-view__columns"},r.createElement(i.l0.Field,{field:e.sort})))},g=[{label:"Свойства",component:r.createElement(w,null)},{label:"Мета-теги",component:r.createElement(p,null)}],E=function(e){var t=e.fields;return r.createElement(c.Provider,{value:{fields:t}},r.createElement("div",{className:"grid-view__left-pane"},r.createElement(i.mQ,{items:g})))},y=function(e){var t=e.fields;return r.createElement("div",{className:"grid-view__right-pane"},r.createElement(i.l0.Group,null,r.createElement(i.l0.Field,{field:t.isPublished}),r.createElement(i.l0.Field,{field:t.isPinned})),r.createElement(i.l0.Group,null,r.createElement(i.l0.Field,{field:t.sites}),r.createElement(i.l0.Field,{field:t.locale})),r.createElement(i.l0.Group,null,r.createElement(i.l0.Field,{field:t.tags})))};var O=new Date;const h={slug:"",title:"",content:"",description:"",isPinned:!1,isPublished:!0,publishedAt:new Date(O.getTime()-60*O.getTimezoneOffset()*1e3).toISOString(),locale:"ru",sort:100,meta:[]};var P=n(2195);const Z={title:P.Z.title,slug:P.Z.slug,description:P.Z.description,content:P.Z.content,sort:P.Z.sort,publishedAt:P.Z.publishedAt,isPublished:P.Z.isPublished,sites:P.Z.sites,locale:P.Z.locale,tags:P.Z.tags,imageSmall:{type:"file",name:"imageSmall",label:"Изображение",hint:"Изображение для списка новостей. Размер изображения не должен превышать 800x600 пикселей. Максимальный размер файла – 2МБ."},imageLarge:{type:"file",name:"imageLarge",label:"Большое изображение",hint:"Изображение для страницы детального просмотра новости. Размер изображения должен быть больше 800x600 пикселей. Максимальный размер файла – 2МБ."},isPinned:{type:"checkbox",name:"isPinned",defaultValue:!1,label:"Закрепить новость?",hint:"Закрепленные элементы отображаются вверху списка элементов."}};var _=n(3379),j=n.n(_),k=n(7795),S=n.n(k),D=n(569),F=n.n(D),x=n(3565),A=n.n(x),N=n(9216),T=n.n(N),C=n(4589),I=n.n(C),L=n(9351),z={};z.styleTagTransform=I(),z.setAttributes=A(),z.insert=F().bind(null,"head"),z.domAPI=S(),z.insertStyleElement=T(),j()(L.Z,z),L.Z&&L.Z.locals&&L.Z.locals;const V=function(e){var t=e.isNewElement,n=void 0!==t&&t,i=(0,l.UO)().uuid,c={request:i&&"GET:/content/news/".concat(i),submit:n?"POST:/content/news":i&&"PUT:/content/news/".concat(i),success:"/content/news"};return r.createElement(a.Z,{endpoints:c,fields:Z,defaults:h},(function(e){return r.createElement(r.Fragment,null,r.createElement(E,{fields:e.fields}),r.createElement(y,{fields:e.fields}))}))}},8594:(e,t,n)=>{n.d(t,{Z:()=>x});var r=n(885),l=n(4925),a=n(7294),i=n(9711),c=n(6974),s=n(3884),o=n(1394),u=n(4393);const m=function(e){var t=e.workflow,n=e.defaults;return a.createElement(a.Fragment,null,a.createElement("span",null,"Создано ",t&&t.createdBy||(null==n?void 0:n.name)),a.createElement("span",null,t&&t.createdAt?a.createElement(s.ZX,{format:"datetime",value:t.createdAt}):null==n?void 0:n.date))},d=function(e){var t=e.workflow,n=e.defaults;return a.createElement(a.Fragment,null,a.createElement("span",null,"Изменено ",t&&t.updatedBy||(null==n?void 0:n.name)),a.createElement("span",null,t&&t.updatedAt?a.createElement(s.ZX,{format:"datetime",value:t.updatedAt}):null==n?void 0:n.date))};var f=n(3379),p=n.n(f),b=n(7795),v=n.n(b),w=n(569),g=n.n(w),E=n(3565),y=n.n(E),O=n(9216),h=n.n(O),P=n(4589),Z=n.n(P),_=n(3135),j={};j.styleTagTransform=Z(),j.setAttributes=y(),j.insert=g().bind(null,"head"),j.domAPI=v(),j.insertStyleElement=h(),p()(_.Z,j),_.Z&&_.Z.locals&&_.Z.locals;const k=function(){var e=(0,u.o)().state.data.workflow,t={name:"Джон Смит",date:"Дата неизвестна"};return a.createElement("div",{className:"workflow-view"},a.createElement("div",{className:"workflow-view__item workflow-view__item--created"},a.createElement("div",{className:"workflow-view__icon"},a.createElement(s.JO,{name:"clock"})),a.createElement("div",{className:"workflow-view__text"},a.createElement(m,{workflow:e,defaults:t}))),a.createElement("div",{className:"workflow-view__item workflow-view__item--updated"},a.createElement("div",{className:"workflow-view__icon"},a.createElement(s.JO,{name:"clock"})),a.createElement("div",{className:"workflow-view__text"},a.createElement(d,{workflow:e,defaults:t}))))};var S=n(4752),D={};D.styleTagTransform=Z(),D.setAttributes=y(),D.insert=g().bind(null,"head"),D.domAPI=v(),D.insertStyleElement=h(),p()(S.Z,D),S.Z&&S.Z.locals&&S.Z.locals;var F=["children"];const x=(0,o.Jt)((function(e){var t=e.children,n=(0,l.Z)(e,F),u=(0,a.useState)("submit"),m=(0,r.Z)(u,2),d=m[0],f=m[1],p=n.fields,b=n.defaults,v=n.endpoints,w=(0,c.s0)();return a.createElement(o.ZP,{endpoints:v,fields:p,defaults:b,onSubmitSucceed:function(){"submit"===d&&w((null==v?void 0:v.success)||"/")}},a.createElement("div",{className:"grid-view"},a.createElement(o._y.Consumer,null,t)),a.createElement(s.l0.Actions,null,a.createElement("div",null,a.createElement(s.zx,{isSubmit:!0,variant:"primary",onClick:function(){return f("submit")}},"Сохранить"),a.createElement(s.zx,{isSubmit:!0,variant:"default",onClick:function(){return f("apply")}},"Применить")),a.createElement(i.rU,{to:(null==v?void 0:v.success)||"/",className:"btn btn--default"},"Отменить")),a.createElement(k,null))}))},1394:(e,t,n)=>{n.d(t,{_y:()=>s,ZP:()=>w,Jt:()=>u.Z});var r=n(4942),l=n(7294),a=n(4184),i=n.n(a),c=n(3884);const s=l.createContext({fields:{}});var o=n(885),u=n(4393);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=function(e){var t=(0,u.o)(),n=t.state,l=t.update,a=Object.entries(e).map((function(e){var t=(0,o.Z)(e,2),a=t[0],i=t[1],c=n.data[i.name],s={value:null==c?i.emptyValue||"":c,errors:n.errors[i.name],onChange:function(e){l(d(d({},n),{},{data:d(d({},n.data),{},(0,r.Z)({},i.name,e))}))}};return[a,d(d({},i),s)]}));return Object.fromEntries(a)};var p=n(6974);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w=function(e){var t=(0,l.useRef)(null),n=e.fields,r=e.defaults,a=void 0===r?{}:r,o=e.variant,m=e.endpoints,d=e.children,b=(0,u.o)(),w=function(e){var t=e.endpoints,n=e.onSubmit,r=e.onSubmitSucceed,l=(0,u.o)(),a=(0,p.s0)();return{submit:function(e){e.preventDefault(),"function"==typeof n?n(e):null!=t&&t.submit&&l.submit(t.submit,l.state.data).then((function(e){return"function"==typeof r?r(e):void a((null==t?void 0:t.success)||"/")})).catch((function(e){return e}))}}}(e);(0,l.useEffect)((function(){return b.update(v(v({},b.state),{},{data:a})),m&&m.request&&b.request(m.request),function(){return b.reset()}}),[]);var g=i()("form-view",o&&"form-view--".concat(o)),E="VALIDATION_FAILED"===b.state.status,y="SUBMIT_FAILED"===b.state.status,O="SUBMIT_SUCCEED"===b.state.status;return(0,l.useEffect)((function(){(y||O||E)&&t.current&&t.current.scrollIntoView({behavior:"smooth"})}),[O,y,E]),l.createElement(s.Provider,{value:{fields:f(n||{})}},l.createElement("div",{ref:t},l.createElement(c.bZ,{variant:"danger",isVisible:y},"Ошибка сохранения изменений. Пожалуйста, попробуйте позже."),l.createElement(c.bZ,{variant:"warning",isVisible:E},"Вероятно, некоторые поля формы заполнены неверно"),l.createElement(c.bZ,{variant:"success",isVisible:O},"Изменения успешно сохранены")),l.createElement("div",{className:g},l.createElement(c.l0,{onSubmit:w.submit},d)))}},9351:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(8081),l=n.n(r),a=n(3645),i=n.n(a)()(l());i.push([e.id,'@media(min-width: 1200px){.grid-view{display:grid;grid-template-columns:2fr 1fr;grid-template-rows:1fr;gap:0 2rem;grid-template-areas:". ."}.grid-view__columns{display:grid;grid-template-columns:1fr 1fr;grid-template-areas:". .";gap:0 2rem}}',""]);const c=i},4752:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(8081),l=n.n(r),a=n(3645),i=n.n(a)()(l());i.push([e.id,'@media(min-width: 1200px){.grid-view{display:grid;grid-template-columns:2fr 1fr;grid-template-rows:1fr;gap:0 2rem;grid-template-areas:". ."}.grid-view__columns{display:grid;grid-template-columns:1fr 1fr;grid-template-areas:". .";gap:0 2rem}}',""]);const c=i},3135:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(8081),l=n.n(r),a=n(3645),i=n.n(a)()(l());i.push([e.id,".workflow-view{display:flex;font-size:.875em;color:#343a40;margin-top:2rem}.workflow-view__item{display:flex}.workflow-view__item~.workflow-view__item{margin-left:2rem}.workflow-view__icon{color:#6c757d}.workflow-view__text{display:flex;flex-direction:column;margin-left:1rem}",""]);const c=i}}]);