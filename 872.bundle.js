"use strict";(self.webpackChunkadmin_rusiem_com=self.webpackChunkadmin_rusiem_com||[]).push([[872],{4872:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(7294),n=a(1377),r=a(2965),s=a(8681),i=a(3884),c=a(7882);const o=function(e){var t=e.data;return l.createElement(c.BK,{data:t,baseUrl:"/forms"},(function(e){var a=t.uuid;return l.createElement(l.Fragment,null,l.createElement(i.vb.Link,{icon:"edit",route:"/forms/".concat(a,"/edit")},"Изменить"),l.createElement(i.vb.Link,{icon:"copy",route:"/forms/".concat(a,"/copy")},"Копировать"),l.createElement(i.vb.Divider,null),l.createElement(i.vb.Link,{icon:"layers",route:"/forms/".concat(a,"/statuses")},"Статусы"),l.createElement(i.vb.Divider,null),l.createElement(i.vb.Button,{icon:"trash-2",onClick:e.remove},"Удалить"))}))};var d=a(7697);const m={title:{name:"title",label:"Название",hint:"Введите название веб-формы или его часть",defaultValue:""},publishedAt:{type:"date",name:"publishedAt",label:"Дата публикации",defaultValue:""},site:{type:"select",name:"site",label:"Сайт",hint:"Выберите сайт, на котором опубликована веб-форма",defaultValue:"",attrs:{placeholder:"- Любой сайт -",optionsCallback:function(){return d.Z.lookup("/sites")}}},isPublished:{type:"choices",name:"isPublished",label:"Показывать опубликованные веб-формы",defaultValue:"false",attrs:{isInline:!0,choices:[{value:"",label:"Все"},{value:"true",label:"Да"},{value:"false",label:"Нет"}]}}},u={columns:[{name:"title",title:"Название"},{name:"publishedAt",title:"Дата публ."},{name:"isPublished",title:"Опубл."},{name:"updatedAt",title:"Дата изменения"},{name:"context",title:""}],templates:{row:function(e){var t=e.data;return l.createElement(l.Fragment,null,l.createElement("td",{className:"data-table__cell data-table__cell--title"},t.title),l.createElement("td",{className:"data-table__cell data-table__cell--publishedAt"},l.createElement(i.ZX,{format:"date",value:t.publishedAt})),l.createElement("td",{className:"data-table__cell data-table__cell--isPublished"},t.isPublished&&l.createElement(i.JO,{name:"check",variant:"success"}),!t.isPublished&&l.createElement(i.JO,{name:"x",variant:"muted"})),l.createElement("td",{className:"data-table__cell data-table__cell--updatedAt"},t.workflow?l.createElement(i.ZX,{format:"datetime",value:t.workflow.updatedAt}):l.createElement("em",null,"Нет данных")),l.createElement("td",{className:"data-table__cell data-table__cell--context"},l.createElement(o,{data:t})))},toolbar:function(e){var t=e.children;return l.createElement(c.Js,{createUrl:"/forms/create",createLabel:"Добавить веб-форму"},t)}}};var f=a(3379),b=a.n(f),p=a(7795),v=a.n(p),E=a(569),_=a.n(E),h=a(3565),g=a.n(h),y=a(9216),w=a.n(y),Z=a(4589),P=a.n(Z),O=a(8841),A={};A.styleTagTransform=P(),A.setAttributes=g(),A.insert=_().bind(null,"head"),A.domAPI=v(),A.insertStyleElement=w(),b()(O.Z,A),O.Z&&O.Z.locals&&O.Z.locals;const k=(0,r.J)((0,s.Z)((function(){return l.createElement(r.Z,{endpoint:"/forms",columns:u.columns,templates:u.templates})}),(function(){return l.createElement(c.N2,{param:"forms.filter",fields:m},(function(e){return l.createElement(l.Fragment,null,l.createElement(i.l0.Field,{field:e.fields.title}),l.createElement(i.l0.Field,{field:e.fields.publishedAt}),l.createElement(i.l0.Field,{field:e.fields.site}),l.createElement(i.l0.Field,{field:e.fields.isPublished}))}))}),"Параметры фильтрации")),x=function(){return l.createElement(n.Z,{title:"Контент :: Веб-формы"},l.createElement(k,null))}},2965:(e,t,a)=>{a.d(t,{J:()=>m.Z,Z:()=>p});var l=a(4942),n=a(7294),r=a(4586),s=a(3884),i=a(2723),c=a(7390),o=a(8776),d=a(9466),m=a(325);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={sortBy:"updatedAt",sortOrder:"DESC"};const p=(0,o.Z)((function(e){var t=e.endpoint,a=e.columns,l=e.templates,i=e.sort,c=void 0===i?b:i,o=(0,m.o)(),u=o.state,p=o.update,v=o.request,E=u.pagination,_={endpoint:t,page:E.page,size:E.size,sort:u.sort},h=JSON.stringify(_);(0,n.useEffect)((function(){return p(f(f({},u),{},{sort:c}))}),[]),(0,n.useEffect)((function(){return u.sort&&v(_)}),[h,u.timestamp]);var g=l.toolbar,y=l.row;return n.createElement(n.Fragment,null,g&&n.createElement(g,null,n.createElement(d.Z,{columns:a})),n.createElement(s.bZ,{variant:"info",isVisible:u.isFiltered,isDismissible:!1},"Показаны все элементы с учётом параметров фильтрации"),n.createElement(s.wQ,{columns:a},"FETCHING"===u.status&&n.createElement(s.wQ.Loading,{span:a.length,rows:E.size}),"FETCH_FAILED"===u.status&&n.createElement(s.wQ.Error,{span:a.length}),"WAITING"===u.status&&n.createElement(n.Fragment,null,0===u.data.length&&n.createElement(s.wQ.Empty,{span:a.length}),u.data.map((function(e){return n.createElement(s.wQ.Row,{key:(0,r.Z)(),template:n.createElement(y,{data:e})})})))),n.createElement(s.tl,{resultsTotal:E.total,resultsPerPage:E.size,page:E.page,navigate:function(e){p(f(f({},u),{},{pagination:f(f({},E),{},{page:e})}))}}))}),(0,c.Z)(i.Z))},8681:(e,t,a)=>{a.d(t,{Z:()=>A});var l=a(885),n=a(7294),r=a(4184),s=a.n(r),i=a(3884),c=a(3379),o=a.n(c),d=a(7795),m=a.n(d),u=a(569),f=a.n(u),b=a(3565),p=a.n(b),v=a(9216),E=a.n(v),_=a(4589),h=a.n(_),g=a(1281),y={};y.styleTagTransform=h(),y.setAttributes=p(),y.insert=f().bind(null,"head"),y.domAPI=m(),y.insertStyleElement=E(),o()(g.Z,y),g.Z&&g.Z.locals&&g.Z.locals;var w=n.forwardRef((function(e,t){var a=e.title,l=e.isVisible,r=void 0===l||l,c=e.children,o=s()(["off-canvas",r&&"off-canvas--visible"]);return n.createElement("div",{className:o},n.createElement("div",{className:"off-canvas__content",ref:t},n.createElement("div",{className:"off-canvas__header"},a),n.createElement("div",{className:"off-canvas__body"},c)),r&&n.createElement(i.aV,null))}));w.displayName="OffCanvas";const Z=w;var P=a(6625),O=a(3150);const A=function(e,t,a){var r=function(r){var s=(0,P.Z)(!1),i=(0,l.Z)(s,3),c=i[0],o=i[1],d=i[2],m=(0,n.useState)(!1),u=(0,l.Z)(m,2),f=u[0],b=u[1];return n.createElement(O.Z.Provider,{value:{toggle:function(e){d(void 0!==e?e:!o),b(!0)}}},n.createElement(e,r),n.createElement(Z,{isVisible:o,ref:c,title:a},f&&n.createElement(t,null)))};return r.displayName=e.displayName||e.name||"Component",r}},1281:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(8081),n=a.n(l),r=a(3645),s=a.n(r)()(n());s.push([e.id,".off-canvas__content{display:flex;flex-direction:column;justify-content:stretch;position:fixed;z-index:1100;top:0;right:-400px;bottom:0;width:400px;background-color:#fff;box-shadow:0 1px 2px rgba(33,37,41,.25);transition:transform .2s ease-in-out}.off-canvas__header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1rem;font-size:1.25rem;letter-spacing:-0.025rem}.off-canvas__body{flex-grow:1;padding:1rem 1rem;overflow-y:auto}.off-canvas--visible .off-canvas__content{transform:translateX(-100%)}",""]);const i=s},8841:(e,t,a)=>{a.d(t,{Z:()=>i});var l=a(8081),n=a.n(l),r=a(3645),s=a.n(r)()(n());s.push([e.id,".data-table__col--updatedAt{width:12.625rem}.data-table__col--publishedAt{width:10.125rem}.data-table__col--isPublished,.data-table__col--locale{width:6.375rem}.data-table__cell--locale,.data-table__cell--isPublished{text-align:center}.data-table__header--locale,.data-table__header--isPublished{text-align:center}",""]);const i=s}}]);